<!doctype html>
<html>

<head>
    <title>whatever</title>
    <script type="text/javascript" src="//unpkg.com/vis-timeline@latest/standalone/umd/vis-timeline-graph2d.min.js">
    </script>
    <link href="//unpkg.com/vis-timeline@latest/styles/vis-timeline-graph2d.min.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
        html,
        body {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
            overflow-x: hidden;
        }

        #visualization {
            width: 100%;
            border: 1px solid lightgray;
        }
    </style>
</head>

<body>
    <div id="visualization"></div>

    <script type="text/javascript">
        // DOM element where the Timeline will be attached
        var container = document.getElementById('visualization');

        // Create a DataSet (allows two way data-binding)
        fetch("/ui/ph600s.json").then((response) => response.json()).then((ph600s) => {
            fetch("/ui/ph60s.json").then((response) => response.json()).then((ph60s) => {
                fetch("/ui/open.json").then((response) => response.json()).then((openV) => {
                    const ph600sItems = ph600s.data.result[0].values.map(v => ({
                        x: v[0],
                        y: v[1],
                        group: 0
                    }));

                    const ph60sItems = ph60s.data.result[0].values.map(v => ({
                        x: v[0],
                        y: v[1],
                        group: 1
                    }));

                    const openItems = openV.data.result[0].values.map(v => ({
                        x: v[0],
                        y: v[1] * 8.6,
                        group: 2
                    }));

                    const items = ph600sItems.concat(ph60sItems).concat(openItems);

                    const dataset = new vis.DataSet(items);

                    // Configuration for the Timeline
                    const options = {
                        height: "600px",
                        legend: true,
                        interpolation: false
                    };

                    const groups = new vis.DataSet();
                    groups.add({
                        id: 0,
                        content: "PH 600s",
                    });

                    groups.add({
                        id: 1,
                        content: "PH 60s",
                    });

                    groups.add({
                        id: 2,
                        content: "Valve Open",
                    });

                    // Create a Timeline
                    const graph2d = new vis.Graph2d(container, dataset, groups, options);
                });
            });
        });
    </script>
</body>

</html>